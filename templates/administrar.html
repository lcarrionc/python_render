<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrar Registros</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#3b82f6',
                        'primary-dark': '#2563eb',
                        'success': '#10b981',
                        'success-dark': '#059669',
                        'danger': '#ef4444',
                        'danger-dark': '#dc2626',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'pulse-slow': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen matrix-container matrix-grid">
    <!-- Header con navegación -->
    <header class="w-full px-4 py-12">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <a href="/" class="flex items-center text-white hover:text-blue-300 transition-colors bg-white bg-opacity-20 rounded-full  group px-3 border border-white border-opacity-20 hover:border-opacity-40">
                    <div class="w-10 h-10 flex items-center shadow-lg backdrop-blur-sm">
                        <svg class="w-6 h-6 text-white group-hover:text-blue-300" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                        </svg>
                    </div>
                    <span class="text-lg font-medium">Volver</span>
                </a>
            </div>
            <h1 class="text-lg md:text-3xl font-bold text-white">Administrar Registros</h1>
        </div>
    </header>

    <!-- Contenido principal -->
    <main class="flex-1 px-4 pb-8">
        <div class="max-w-7xl mx-auto">
            <!-- Estadísticas -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-black bg-opacity-40 rounded-2xl p-6 border border-white border-opacity-20 backdrop-blur-sm">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-blue-500 bg-opacity-20 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-blue-400" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M12 8V12L14.5 14.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M5.60414 5.60414L5.07381 5.07381V5.07381L5.60414 5.60414ZM4.33776 6.87052L3.58777 6.87429C3.58984 7.28556 3.92272 7.61844 4.33399 7.62051L4.33776 6.87052ZM6.87954 7.6333C7.29375 7.63539 7.63122 7.30129 7.6333 6.88708C7.63538 6.47287 7.30129 6.1354 6.88708 6.13332L6.87954 7.6333ZM5.07496 4.3212C5.07288 3.90699 4.73541 3.5729 4.3212 3.57498C3.90699 3.57706 3.5729 3.91453 3.57498 4.32874L5.07496 4.3212ZM3.82661 10.7849C3.88286 10.3745 3.59578 9.99627 3.1854 9.94002C2.77503 9.88377 2.39675 10.1708 2.3405 10.5812L3.82661 10.7849ZM18.8622 5.13777C15.042 1.31758 8.86873 1.27889 5.07381 5.07381L6.13447 6.13447C9.33358 2.93536 14.5571 2.95395 17.8016 6.19843L18.8622 5.13777ZM5.13777 18.8622C8.95796 22.6824 15.1313 22.7211 18.9262 18.9262L17.8655 17.8655C14.6664 21.0646 9.44291 21.0461 6.19843 17.8016L5.13777 18.8622ZM18.9262 18.9262C22.7211 15.1313 22.6824 8.95796 18.8622 5.13777L17.8016 6.19843C21.0461 9.44291 21.0646 14.6664 17.8655 17.8655L18.9262 18.9262ZM5.07381 5.07381L3.80743 6.34019L4.86809 7.40085L6.13447 6.13447L5.07381 5.07381ZM4.33399 7.62051L6.87954 7.6333L6.88708 6.13332L4.34153 6.12053L4.33399 7.62051ZM5.08775 6.86675L5.07496 4.3212L3.57498 4.32874L3.58777 6.87429L5.08775 6.86675ZM2.3405 10.5812C1.93907 13.5099 2.87392 16.5984 5.13777 18.8622L6.19843 17.8016C4.27785 15.881 3.48663 13.2652 3.82661 10.7849L2.3405 10.5812Z" fill="currentColor"></path> </g></svg>
                        </div>
                        <div class="ml-4">
                            <p class="text-gray-300 text-sm">Total Registros</p>
                            <p class="text-2xl font-bold text-white">{{ registros|length }}</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-black bg-opacity-40 rounded-2xl p-6 border border-white border-opacity-20 backdrop-blur-sm">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-green-500 bg-opacity-20 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"/>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <p class="text-gray-300 text-sm">Activos</p>
                            <p class="text-2xl font-bold text-white">{{ registros|length }}</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-black bg-opacity-40 rounded-2xl p-6 border border-white border-opacity-20 backdrop-blur-sm">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-purple-500 bg-opacity-20 rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <p class="text-gray-300 text-sm">Base de Datos</p>
                            <p class="text-lg font-bold text-white">PostgreSQL</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tabla de registros -->
            <div class="bg-black bg-opacity-40 rounded-2xl border border-white border-opacity-20 backdrop-blur-sm overflow-hidden">
                <div class="px-6 py-4 border-b border-white border-opacity-20">
                    <h2 class="text-xl font-bold text-white flex items-center">
                        Personas Registradas
                    </h2>
                </div>

                {% if registros %}
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-black bg-opacity-20">
                            <tr>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-300 uppercase tracking-wider">
                                    <div class="flex items-center space-x-2">
                                        <span>ID</span>
                                    </div>
                                </th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-300 uppercase tracking-wider">
                                    <div class="flex items-center space-x-2">
                                        <span>DNI</span>
                                    </div>
                                </th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-300 uppercase tracking-wider">
                                    <div class="flex items-center space-x-2">
                                        <span>Nombres</span>
                                    </div>
                                </th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-300 uppercase tracking-wider hidden md:table-cell">
                                    <div class="flex items-center space-x-2">
                                        <span>Dirección</span>
                                    </div>
                                </th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-300 uppercase tracking-wider hidden lg:table-cell">
                                    <div class="flex items-center space-x-2">
                                        <span>Teléfono</span>
                                    </div>
                                </th>
                                <th class="px-6 py-4 text-center text-sm font-semibold text-gray-300 uppercase tracking-wider">
                                    Acciones
                                </th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-white divide-opacity-10">
                            {% for registro in registros %}
                            <tr class="hover:bg-white hover:bg-opacity-5 transition-colors duration-200" data-dni="{{ registro[0] }}">
                                
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm font-medium text-white">{{ registro[0] }}</div>
                                </td>
                                
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm font-medium text-white">{{ registro[1] }}</div>
                                </td>
                                
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="text-sm font-medium text-white">{{ registro[2] }} {{ registro[3] }}</div>
                                    <div class="text-sm text-gray-400 md:hidden">
                                        {% if registro[4] %}
                                            Ub. {{ registro[4][:30] }}{% if registro[4]|length > 30 %}...{% endif %}
                                        {% endif %}
                                        {% if registro[5] %}
                                            <br>Tel. {{ registro[5] }}
                                        {% endif %}
                                    </div>
                                </td>
                                
                                <td class="px-6 py-4 whitespace-nowrap hidden md:table-cell">
                                    <div class="text-sm text-gray-300">
                                        {% if registro[4] %}
                                            {{ registro[4] }}
                                        {% else %}
                                            <span class="text-gray-500 italic">No especificada</span>
                                        {% endif %}
                                    </div>
                                </td>
                                
                                <td class="px-6 py-4 whitespace-nowrap hidden lg:table-cell">
                                    <div class="text-sm text-gray-300">
                                        {% if registro[5] %}
                                            {{ registro[5] }}
                                        {% else %}
                                            <span class="text-gray-500 italic">No especificado</span>
                                        {% endif %}
                                    </div>
                                </td>
                                
                                <td class="px-6 py-4 whitespace-nowrap text-center group">
                                    <button onclick="confirmarEliminacion('{{ registro[1] }}', '{{ registro[2] }} {{ registro[3] }}')" 
                                            class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-lg text-red-500 hover:text-white bg-red-600 bg-opacity-30 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 transition-all duration-200 hover:scale-105">
                                        <svg class="w-4 h-4 mr-1 text-red-500 group-hover:text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                            <path fill-rule="evenodd" d="M4 5a1 1 0 011-1h10a1 1 0 011 1v12a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm3 4a1 1 0 112 0v6a1 1 0 11-2 0V9zm4 0a1 1 0 112 0v6a1 1 0 11-2 0V9z" clip-rule="evenodd"/>
                                        </svg>
                                        Eliminar
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="text-center py-12">
                    <svg class="w-24 h-24 mx-auto text-gray-500 mb-4" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <h3 class="text-xl font-medium text-gray-300 mb-2">No hay registros</h3>
                    <p class="text-gray-400 mb-6">Aún no se han registrado personas en el sistema.</p>
                    <a href="/" class="inline-flex items-center px-6 py-3 border border-transparent text-sm font-medium rounded-xl text-white bg-gradient-to-r from-primary to-primary-dark hover:shadow-lg transition-all duration-300">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"/>
                        </svg>
                        Crear Primer Registro
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </main>

    <!-- Modal de confirmación -->
    <div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-300 scale-95" id="confirm-modal-content">
            <div class="p-8 text-center">
                <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-red-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                    </svg>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">Confirmar Eliminación</h3>
                <p class="text-gray-600 mb-2">¿Estás seguro de que deseas eliminar el registro de:</p>
                <p class="text-lg font-semibold text-gray-800 mb-6" id="personName"></p>
                <div class="text-sm text-gray-500 mb-6">
                    <p>DNI: <span id="personDni" class="font-medium"></span></p>
                    <p class="mt-1 text-red-600">Esta acción no se puede deshacer</p>
                </div>
                <div class="flex space-x-3">
                    <button onclick="cerrarConfirmacion()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 px-6 rounded-xl font-medium transition-colors">
                        Cancelar
                    </button>
                    <form id="deleteForm" method="POST" class="flex-1">
                        <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white py-3 px-6 rounded-xl font-medium transition-all duration-300 hover:shadow-lg">
                            <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                <path fill-rule="evenodd" d="M4 5a1 1 0 011-1h10a1 1 0 011 1v12a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm3 4a1 1 0 112 0v6a1 1 0 11-2 0V9zm4 0a1 1 0 112 0v6a1 1 0 11-2 0V9z" clip-rule="evenodd"/>
                            </svg>
                            Eliminar
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de éxito -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-auto transform transition-all duration-300 scale-95" id="success-modal-content">
            <div class="p-8 text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse-slow">
                    <svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">¡Registro Eliminado!</h3>
                <p class="text-gray-600 mb-6">El registro ha sido eliminado correctamente del sistema.</p>
                <button onclick="cerrarExito()" class="w-full bg-gradient-to-r from-success to-success-dark text-white py-3 px-6 rounded-xl font-medium hover:shadow-lg transition-all duration-300">
                    Aceptar
                </button>
            </div>
        </div>
    </div>
    <!-- Scripts -->
    <script src="/static/main2.js"></script>
</body>
</html>